---
output: github_document
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)

```

# ralplan

```{r ,echo = FALSE, message=FALSE, warning=FALSE}
rm(list = ls())
library(devtools)
library(lubridate)
library(ralget)
library(tidyverse)
library(tidygraph)
library(ralplan)
options(width = 180)
reverse_min <- function(x){-min(as.numeric(x))}
load_all()
```

```{r , message=FALSE, warning=FALSE}
separate_egg <- 
  T(name = "Separate egg", time = duration("5 minutes"), 
    priority = 10, resources = list(cook = 1))

lemon_filling <- 
  T(name = "Make lemon filling", time = duration("10 minutes"), 
    priority = 10, resources = list(cook = 1))

make_meringue <- 
  T(name = "Make meringue", time = duration("10 minutes"), 
    priority = 10, resources = list(cook = 1))

crust <- 
  T(name = "Fill crust", time = duration("5 minutes"), 
   priority = 10, resources = list(cook = 1))

add_meringue <- 
  T(name = "Add meringue", time = duration("5 minutes"), 
    priority = 10, resources = list(cook = 1))
```



```{r , message=FALSE, warning=FALSE}
plan <- 
 add_meringue(after(make_meringue), after(crust)) +
 lemon_filling(after(separate_egg)) + 
 make_meringue(after(separate_egg)) + 
 crust(after(lemon_filling))  

plot(form(plan))
```


```{r example, message=FALSE, warning=FALSE}
result <- 
  execute( 
    plan, 
    resource_pool = list(cook = 1),
    time_tracker_list = create_work_times(n = 60,1)
  )

plot_executed_plan(result)

```